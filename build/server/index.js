import{jsx as a,jsxs as i,Fragment as J}from"react/jsx-runtime";import{PassThrough as xe}from"node:stream";import{createReadableStreamFromReadable as ve}from"@react-router/node";import{ServerRouter as Ne,UNSAFE_withComponentProps as k,Outlet as K,UNSAFE_withHydrateFallbackProps as ke,Meta as _e,Links as je,ScrollRestoration as Pe,Scripts as Ie,createCookieSessionStorage as Le,redirect as L,useActionData as C,useNavigation as H,Form as U,useSearchParams as Se,Link as $,useLoaderData as R,useRevalidator as q,useNavigate as Q}from"react-router";import{isbot as Ae}from"isbot";import{renderToPipeableStream as Ee}from"react-dom/server";import{useState as N,useEffect as X,useRef as Te}from"react";import{eq as h,desc as ee,count as Me,and as z}from"drizzle-orm";import{SignJWT as Ce}from"jose";import Ue from"postgres";import{drizzle as Re}from"drizzle-orm/postgres-js";import{pgTable as G,timestamp as W,text as I,boolean as Oe,uuid as A,primaryKey as De}from"drizzle-orm/pg-core";import{uuidv7 as te}from"uuidv7";import{verify as Fe,hash as Be}from"@node-rs/argon2";import{z as b}from"zod";import $e from"mailgun.js";import ze from"form-data";import{v2 as re}from"cloudinary";import{formatDistanceToNow as Ge}from"date-fns";const ae=5e3;function We(t,e,r,n,s){return t.method.toUpperCase()==="HEAD"?new Response(null,{status:e,headers:r}):new Promise((o,l)=>{let c=!1,u=t.headers.get("user-agent"),m=u&&Ae(u)||n.isSpaMode?"onAllReady":"onShellReady",y=setTimeout(()=>P(),ae+1e3);const{pipe:j,abort:P}=Ee(a(Ne,{context:n,url:t.url}),{[m](){c=!0;const p=new xe({final(_){clearTimeout(y),y=void 0,_()}}),w=ve(p);r.set("Content-Type","text/html"),j(p),o(new Response(w,{headers:r,status:e}))},onShellError(p){l(p)},onError(p){e=500,c&&console.error(p)}})})}const Ve=Object.freeze(Object.defineProperty({__proto__:null,default:We,streamTimeout:ae},Symbol.toStringTag,{value:"Module"}));function Ze({children:t}){return i("html",{lang:"en",children:[i("head",{children:[a("meta",{charSet:"utf-8"}),a("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),a(_e,{}),a(je,{})]}),i("body",{className:"bg-gray-50 min-h-screen",children:[t,a(Pe,{}),a(Ie,{})]})]})}const Ye=k(function(){return a(K,{})}),Je=ke(function(){return a("div",{className:"flex items-center justify-center min-h-screen",children:i("div",{className:"text-center",children:[a("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),a("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})})}),Ke=Object.freeze(Object.defineProperty({__proto__:null,HydrateFallback:Je,Layout:Ze,default:Ye},Symbol.toStringTag,{value:"Module"}));if(!process.env.SESSION_SECRET)throw new Error("SESSION_SECRET environment variable is required");const E=Le({cookie:{name:"__session",httpOnly:!0,maxAge:3600*24*30,path:"/",sameSite:"lax",secrets:[process.env.SESSION_SECRET],secure:process.env.NODE_ENV==="production"}});async function ne(t,e){const r=await E.getSession();return r.set("userId",t),L(e,{headers:{"Set-Cookie":await E.commitSession(r)}})}async function O(t){const r=(await E.getSession(t.headers.get("Cookie"))).get("userId");return!r||typeof r!="string"?null:r}async function x(t){const e=await O(t);if(!e){const r=new URL(t.url),n=r.pathname+r.search;throw L(`/login?redirectTo=${encodeURIComponent(n)}`)}return e}async function He(t){const e=await E.getSession(t.headers.get("Cookie"));return L("/login",{headers:{"Set-Cookie":await E.destroySession(e)}})}async function qe({request:t}){return await O(t)?L("/home"):null}const Qe=k(function(){return a("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-500 to-blue-700",children:i("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[a("h1",{className:"text-6xl font-extrabold text-white mb-8",children:"Welcome to Tweeter"}),a("p",{className:"text-2xl text-blue-100 mb-12",children:"Share your thoughts in 140 characters or less"}),i("div",{className:"space-x-4",children:[a("a",{href:"/signup",className:"inline-block px-8 py-3 bg-white text-blue-600 font-semibold rounded-lg hover:bg-blue-50 transition",children:"Sign up"}),a("a",{href:"/login",className:"inline-block px-8 py-3 bg-blue-800 text-white font-semibold rounded-lg hover:bg-blue-900 transition",children:"Log in"})]}),i("div",{className:"mt-16 text-blue-100",children:[a("p",{className:"text-lg font-semibold mb-4",children:"Features:"}),i("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-left",children:[i("div",{className:"bg-blue-600 bg-opacity-50 p-6 rounded-lg",children:[a("h3",{className:"font-semibold text-white mb-2",children:"ðŸ“ Quick Tweets"}),a("p",{className:"text-sm",children:"Share your thoughts in 140 characters"})]}),i("div",{className:"bg-blue-600 bg-opacity-50 p-6 rounded-lg",children:[a("h3",{className:"font-semibold text-white mb-2",children:"â¤ï¸ Like & Engage"}),a("p",{className:"text-sm",children:"Show appreciation for great content"})]}),i("div",{className:"bg-blue-600 bg-opacity-50 p-6 rounded-lg",children:[a("h3",{className:"font-semibold text-white mb-2",children:"ðŸ‘¤ Custom Profiles"}),a("p",{className:"text-sm",children:"Personalize your presence with bio and avatar"})]})]})]})]})})}),Xe=Object.freeze(Object.defineProperty({__proto__:null,default:Qe,loader:qe},Symbol.toStringTag,{value:"Module"})),d=G("profiles",{id:A("id").primaryKey().$defaultFn(()=>te()),username:I("username").unique().notNull(),email:I("email").unique().notNull(),passwordHash:I("password_hash").notNull(),emailVerified:Oe("email_verified").default(!1).notNull(),bio:I("bio"),avatarUrl:I("avatar_url"),createdAt:W("created_at").defaultNow().notNull()}),f=G("tweets",{id:A("id").primaryKey().$defaultFn(()=>te()),profileId:A("profile_id").references(()=>d.id,{onDelete:"cascade"}).notNull(),content:I("content").notNull(),createdAt:W("created_at").defaultNow().notNull()}),v=G("likes",{tweetId:A("tweet_id").references(()=>f.id,{onDelete:"cascade"}).notNull(),profileId:A("profile_id").references(()=>d.id,{onDelete:"cascade"}).notNull(),createdAt:W("created_at").defaultNow().notNull()},t=>({pk:De({columns:[t.tweetId,t.profileId]})})),et=Object.freeze(Object.defineProperty({__proto__:null,likes:v,profiles:d,tweets:f},Symbol.toStringTag,{value:"Module"}));if(!process.env.DATABASE_URL)throw new Error("DATABASE_URL environment variable is required");const tt=process.env.DATABASE_URL.replace(/[&?]channel_binding=[^&]*/g,""),rt=Ue(tt,{max:20,idle_timeout:20,connect_timeout:30,connection:{application_name:"tweeter"}}),g=Re(rt,{schema:et});async function at(t){return Be(t,{memoryCost:65536,timeCost:3,outputLen:32,parallelism:1})}async function nt(t,e){try{return await Fe(t,e)}catch{return!1}}const st=b.object({username:b.string().min(3,"Username must be at least 3 characters").max(20,"Username must be at most 20 characters").regex(/^[a-zA-Z0-9_]+$/,"Username can only contain letters, numbers, and underscores"),email:b.string().email("Invalid email address"),password:b.string().min(8,"Password must be at least 8 characters")}),ot=b.object({email:b.string().email("Invalid email address"),password:b.string().min(8,"Password must be at least 8 characters")});b.object({token:b.string()});async function se(t){const e=st.parse(t);if(await g.query.profiles.findFirst({where:h(d.username,e.username)}))throw new Error("Username already taken");if(await g.query.profiles.findFirst({where:h(d.email,e.email)}))throw new Error("Email already registered");const s=await at(e.password),[o]=await g.insert(d).values({username:e.username,email:e.email,passwordHash:s,emailVerified:!1}).returning(),l=new TextEncoder().encode(process.env.JWT_SECRET),c=await new Ce({userId:o.id,email:o.email}).setProtectedHeader({alg:"HS256"}).setExpirationTime("24h").setIssuedAt().sign(l);return{userId:o.id,verificationToken:c}}async function oe(t){try{const e=new TextEncoder().encode(process.env.JWT_SECRET),{jwtVerify:r}=await import("jose"),{payload:n}=await r(t,e);if(!n.userId||typeof n.userId!="string")throw new Error("Invalid token payload");await g.update(d).set({emailVerified:!0}).where(h(d.id,n.userId))}catch{throw new Error("Invalid or expired verification token")}}async function ie(t,e){const r=ot.parse({email:t,password:e}),n=await g.query.profiles.findFirst({where:h(d.email,r.email)});if(!n||!await nt(n.passwordHash,r.password))return null;if(!n.emailVerified)throw new Error("Email not verified. Please check your email for verification link.");return n}async function it({request:t}){const e=await t.formData(),r=e.get("username"),n=e.get("email"),s=e.get("password");try{return await se({username:r,email:n,password:s}),L("/login?verified=pending")}catch(o){return{error:o instanceof Error?o.message:"Failed to create account"}}}const lt=k(function(){const e=C(),n=H().state==="submitting",[s,o]=N(""),[l,c]=N(""),u=s.length>0&&s===l,m=l.length>0&&s!==l,y=s.length>=8&&u,j=p=>{o(p.target.value)},P=p=>{c(p.target.value)};return a("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:i("div",{className:"max-w-md w-full space-y-8",children:[i("div",{children:[a("h1",{className:"text-center text-3xl font-extrabold text-gray-900",children:"Create your account"}),a("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Join Tweeter and start sharing"})]}),i(U,{method:"post",className:"mt-8 space-y-6",children:[e?.error&&a("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded",children:e.error}),i("div",{className:"space-y-4",children:[i("div",{children:[a("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),a("input",{id:"username",name:"username",type:"text",required:!0,minLength:3,maxLength:20,pattern:"[a-zA-Z0-9_]+",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"johndoe"}),a("p",{className:"mt-1 text-xs text-gray-500",children:"3-20 characters, letters, numbers, and underscores only"})]}),i("div",{children:[a("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),a("input",{id:"email",name:"email",type:"email",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"you@example.com"})]}),i("div",{children:[a("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),a("input",{id:"password",name:"password",type:"password",required:!0,minLength:8,value:s,onChange:j,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"}),a("p",{className:"mt-1 text-xs text-gray-500",children:"At least 8 characters"})]}),i("div",{children:[a("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700",children:"Confirm password"}),a("input",{id:"confirm-password",type:"password",required:!0,value:l,onChange:P,className:`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${m?"border-red-300":"border-gray-300"}`,placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"}),m&&a("p",{className:"mt-1 text-xs text-red-600",children:"Passwords do not match"})]})]}),a("button",{type:"submit",disabled:n||!y,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Creating account...":"Sign up"}),i("p",{className:"text-center text-sm text-gray-600",children:["Already have an account?"," ",a("a",{href:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"Log in"})]})]})]})})}),dt=Object.freeze(Object.defineProperty({__proto__:null,action:it,default:lt},Symbol.toStringTag,{value:"Module"})),M=new Map;function V(t){return async e=>{const r=Date.now(),n=M.get(e);n&&n.resetTime<r&&M.delete(e);const s=M.get(e)||{count:0,resetTime:r+t.window};return s.count>=t.max?{allowed:!1,remaining:0,resetTime:s.resetTime}:(s.count++,M.set(e,s),{allowed:!0,remaining:t.max-s.count,resetTime:s.resetTime})}}const le=V({max:5,window:900*1e3}),ct=V({max:3,window:3600*1e3}),ut=V({max:10,window:60*1e3});function D(t){const e=t.headers.get("x-forwarded-for");return e?e.split(",")[0].trim():t.headers.get("x-real-ip")||"unknown"}async function mt({request:t}){const e=await t.formData(),r=e.get("email"),n=e.get("password"),s=e.get("redirectTo")||"/home";try{const o=D(t);if(!(await le(o)).allowed)return{error:"Too many login attempts. Please try again later."};const c=await ie(r,n);return c?await ne(c.id,s):{error:"Invalid email or password"}}catch(o){return o instanceof Error?{error:o.message}:{error:"Failed to login"}}}const ft=k(function(){const e=C(),r=H(),[n]=Se(),s=r.state==="submitting",o=n.get("verified")==="pending",l=n.get("redirectTo")||"/home";return a("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:i("div",{className:"max-w-md w-full space-y-8",children:[i("div",{children:[a("h1",{className:"text-center text-3xl font-extrabold text-gray-900",children:"Log in to Tweeter"}),a("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Welcome back!"})]}),o&&a("div",{className:"bg-blue-50 border border-blue-200 text-blue-800 px-4 py-3 rounded",children:"Please check your email and click the verification link to activate your account."}),i(U,{method:"post",className:"mt-8 space-y-6",children:[a("input",{type:"hidden",name:"redirectTo",value:l}),e?.error&&a("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded",children:e.error}),i("div",{className:"space-y-4",children:[i("div",{children:[a("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),a("input",{id:"email",name:"email",type:"email",required:!0,autoComplete:"email",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"you@example.com"})]}),i("div",{children:[a("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),a("input",{id:"password",name:"password",type:"password",required:!0,autoComplete:"current-password",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"})]})]}),a("button",{type:"submit",disabled:s,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Logging in...":"Log in"}),i("p",{className:"text-center text-sm text-gray-600",children:["Don't have an account?"," ",a("a",{href:"/signup",className:"font-medium text-blue-600 hover:text-blue-500",children:"Sign up"})]})]})]})})}),ht=Object.freeze(Object.defineProperty({__proto__:null,action:mt,default:ft},Symbol.toStringTag,{value:"Module"}));async function pt({request:t}){const r=new URL(t.url).searchParams.get("token");if(!r)return{success:!1,error:"No verification token provided"};try{return await oe(r),{success:!0,message:"Email verified successfully. You can now log in."}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Failed to verify email"}}}const gt=k(function({loaderData:e}){const{success:r,error:n,message:s}=e;return a("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:a("div",{className:"max-w-md w-full bg-white rounded-lg shadow-md p-8",children:a("div",{className:"text-center",children:r?i(J,{children:[a("div",{className:"mb-4",children:a("svg",{className:"mx-auto h-16 w-16 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Email Verified!"}),a("p",{className:"text-gray-600 mb-6",children:s}),a($,{to:"/login",className:"inline-block bg-blue-500 text-white px-6 py-2 rounded-md hover:bg-blue-600 transition",children:"Go to Login"})]}):i(J,{children:[a("div",{className:"mb-4",children:a("svg",{className:"mx-auto h-16 w-16 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Verification Failed"}),a("p",{className:"text-gray-600 mb-6",children:n}),i("div",{className:"space-y-3",children:[a($,{to:"/signup",className:"block bg-blue-500 text-white px-6 py-2 rounded-md hover:bg-blue-600 transition",children:"Sign Up Again"}),a($,{to:"/login",className:"block text-blue-500 hover:text-blue-600 transition",children:"Back to Login"})]})]})})})})}),wt=Object.freeze(Object.defineProperty({__proto__:null,default:gt,loader:pt},Symbol.toStringTag,{value:"Module"}));if(!process.env.MAILGUN_API_KEY||!process.env.MAILGUN_DOMAIN)throw new Error("MAILGUN_API_KEY and MAILGUN_DOMAIN environment variables are required");const bt=new $e(ze),yt=bt.client({username:"api",key:process.env.MAILGUN_API_KEY});async function xt(t,e,r){const n=`${r||process.env.BASE_URL||"http://localhost:5173"}/verify-email?token=${e}`,s=process.env.MAILGUN_FROM_EMAIL||`noreply@${process.env.MAILGUN_DOMAIN}`,o=process.env.MAILGUN_FROM_NAME||"Tweeter";try{await yt.messages.create(process.env.MAILGUN_DOMAIN,{from:`${o} <${s}>`,to:[t],subject:"Verify your Tweeter account",html:`
        <!DOCTYPE html>
        <html>
        <head>
          <meta charset="utf-8">
          <style>
            body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
            .container { max-width: 600px; margin: 0 auto; padding: 20px; }
            .button { display: inline-block; padding: 12px 24px; background-color: #1DA1F2; color: white; text-decoration: none; border-radius: 4px; margin: 20px 0; }
            .footer { margin-top: 40px; padding-top: 20px; border-top: 1px solid #eee; font-size: 12px; color: #666; }
          </style>
        </head>
        <body>
          <div class="container">
            <h1>Welcome to Tweeter!</h1>
            <p>Thank you for signing up. Please verify your email address to activate your account.</p>
            <a href="${n}" class="button">Verify Email Address</a>
            <p>Or copy and paste this link into your browser:</p>
            <p style="word-break: break-all;">${n}</p>
            <p><strong>This link will expire in 24 hours.</strong></p>
            <div class="footer">
              <p>If you didn't create an account, you can safely ignore this email.</p>
            </div>
          </div>
        </body>
        </html>
      `,text:`
        Welcome to Tweeter!

        Thank you for signing up. Please verify your email address to activate your account.

        Click here to verify: ${n}

        This link will expire in 24 hours.

        If you didn't create an account, you can safely ignore this email.
      `})}catch(l){throw console.error("Failed to send verification email:",l),new Error("Failed to send verification email")}}async function vt(t){try{const e=D(t);if(!(await ct(e)).allowed)return Response.json({error:"Too many signup attempts. Please try again later."},{status:429});const n=await t.json(),{userId:s,verificationToken:o}=await se(n);try{const l=new URL(t.url),c=`${l.protocol}//${l.host}`;await xt(n.email,o,c)}catch(l){console.error("Failed to send verification email:",l)}return Response.json({message:"Account created. Please check your email to verify.",userId:s},{status:201})}catch(e){return e instanceof Error?Response.json({error:e.message},{status:400}):Response.json({error:"Failed to create account"},{status:500})}}async function Nt(t){try{const e=D(t);if(!(await le(e)).allowed)return Response.json({error:"Too many login attempts. Please try again later."},{status:429});const n=await t.json(),{email:s,password:o}=n,l=await ie(s,o);if(!l)return Response.json({error:"Invalid email or password"},{status:401});const c=new URL(t.url).searchParams.get("redirectTo")||"/home";return await ne(l.id,c)}catch(e){return e instanceof Error?Response.json({error:e.message},{status:400}):Response.json({error:"Failed to login"},{status:500})}}async function kt(t){return await He(t)}async function _t(t){try{const r=new URL(t.url).searchParams.get("token");return r?(await oe(r),Response.json({message:"Email verified successfully. You can now log in."})):Response.json({error:"Verification token is required"},{status:400})}catch(e){return e instanceof Error?Response.json({error:e.message},{status:400}):Response.json({error:"Failed to verify email"},{status:500})}}const jt=b.object({content:b.string().min(1,"Tweet cannot be empty").max(140,"Tweet cannot exceed 140 characters")});async function de(t,e){const r=jt.parse(e),[n]=await g.insert(f).values({profileId:t,content:r.content}).returning();return n}async function ce(t=20,e=0){return await g.select({id:f.id,content:f.content,createdAt:f.createdAt,profileId:f.profileId,author:{id:d.id,username:d.username,avatarUrl:d.avatarUrl}}).from(f).innerJoin(d,h(f.profileId,d.id)).orderBy(ee(f.createdAt)).limit(t).offset(e)}async function ue(t,e=20,r=0){return await g.select({id:f.id,content:f.content,createdAt:f.createdAt,profileId:f.profileId,author:{id:d.id,username:d.username,avatarUrl:d.avatarUrl}}).from(f).innerJoin(d,h(f.profileId,d.id)).where(h(f.profileId,t)).orderBy(ee(f.createdAt)).limit(e).offset(r)}async function me(t,e){const r=await g.select({id:f.id,profileId:f.profileId}).from(f).where(h(f.id,t)).limit(1);return r.length===0||r[0].profileId!==e?!1:(await g.delete(f).where(h(f.id,t)),!0)}async function fe(t){try{const e=await x(t),r=D(t);if(!(await ut(r)).allowed)return Response.json({error:"Too many tweets. Please slow down."},{status:429});const s=await t.json(),o=await de(e,s);return Response.json(o,{status:201})}catch(e){return e instanceof Error?Response.json({error:e.message},{status:400}):Response.json({error:"Failed to create tweet"},{status:500})}}async function Pt(t){try{const e=new URL(t.url),r=parseInt(e.searchParams.get("limit")||"20",10),n=parseInt(e.searchParams.get("offset")||"0",10),s=await ce(r,n);return Response.json({tweets:s})}catch{return Response.json({error:"Failed to fetch feed"},{status:500})}}async function It(t,e){try{const r=new URL(t.url),n=parseInt(r.searchParams.get("limit")||"20",10),s=parseInt(r.searchParams.get("offset")||"0",10),o=await ue(e,n,s);return Response.json({tweets:o})}catch{return Response.json({error:"Failed to fetch tweets"},{status:500})}}async function Lt(t,e){try{const r=await x(t);return await me(e,r)?Response.json({success:!0,message:"Tweet deleted successfully"}):Response.json({error:"Tweet not found or you are not authorized to delete it"},{status:404})}catch(r){return r instanceof Error?Response.json({error:r.message},{status:400}):Response.json({error:"Failed to delete tweet"},{status:500})}}async function he(t,e){return(await g.select().from(v).where(z(h(v.tweetId,t),h(v.profileId,e))).limit(1)).length>0?(await g.delete(v).where(z(h(v.tweetId,t),h(v.profileId,e))),!1):(await g.insert(v).values({tweetId:t,profileId:e}),!0)}async function Z(t,e){return(await g.select().from(v).where(z(h(v.tweetId,t),h(v.profileId,e))).limit(1)).length>0}async function F(t){return(await g.select({count:Me()}).from(v).where(h(v.tweetId,t)))[0]?.count??0}async function St(t,e){try{const r=await x(t),n=await he(e,r),s=await F(e);return Response.json({success:!0,liked:n,likeCount:s,message:n?"Tweet liked":"Tweet unliked"})}catch(r){return r instanceof Error?Response.json({error:r.message},{status:400}):Response.json({error:"Failed to toggle like"},{status:500})}}async function At(t,e){try{const r=await x(t).catch(()=>null),n=await F(e);let s=!1;return r&&(s=await Z(e,r)),Response.json({likeCount:n,liked:s})}catch{return Response.json({error:"Failed to fetch like status"},{status:500})}}async function B(t){return(await g.select({id:d.id,username:d.username,bio:d.bio,avatarUrl:d.avatarUrl,createdAt:d.createdAt}).from(d).where(h(d.id,t)).limit(1))[0]||null}async function pe(t){return(await g.select({id:d.id,username:d.username,bio:d.bio,avatarUrl:d.avatarUrl,createdAt:d.createdAt}).from(d).where(h(d.username,t)).limit(1))[0]||null}async function Y(t,e){const r={};return e.bio!==void 0&&(r.bio=e.bio),e.avatarUrl!==void 0&&(r.avatarUrl=e.avatarUrl),Object.keys(r).length===0?B(t):(await g.update(d).set(r).where(h(d.id,t)).returning({id:d.id,username:d.username,bio:d.bio,avatarUrl:d.avatarUrl,createdAt:d.createdAt}))[0]||null}const ge=b.object({bio:b.string().max(160,"Bio cannot exceed 160 characters").optional(),avatarUrl:b.string().url("Must be a valid URL").optional().or(b.literal(""))});re.config({cloud_name:process.env.CLOUDINARY_CLOUD_NAME,api_key:process.env.CLOUDINARY_API_KEY,api_secret:process.env.CLOUDINARY_API_SECRET});async function Et(t,e="avatars"){try{let r;return Buffer.isBuffer(t)?r=`data:image/jpeg;base64,${t.toString("base64")}`:r=t,(await re.uploader.upload(r,{folder:e,transformation:[{width:400,height:400,crop:"fill",gravity:"face"},{quality:"auto",fetch_format:"auto"}]})).secure_url}catch(r){throw console.error("Cloudinary upload error:",r),new Error("Failed to upload image")}}async function Tt(t,e){try{const r=await pe(e);return r?Response.json({profile:r}):Response.json({error:"User not found"},{status:404})}catch{return Response.json({error:"Failed to fetch profile"},{status:500})}}async function Mt(t){try{const e=await x(t),r=await t.json(),n=ge.parse(r),s=await Y(e,n);return s?Response.json({profile:s}):Response.json({error:"Profile not found"},{status:404})}catch(e){return e instanceof Error?Response.json({error:e.message},{status:400}):Response.json({error:"Failed to update profile"},{status:500})}}async function Ct(t){try{const e=await x(t),r=await B(e);return r?Response.json({profile:r}):Response.json({error:"Profile not found"},{status:404})}catch{return Response.json({error:"Failed to fetch profile"},{status:500})}}async function Ut(t){console.log("[handleUploadAvatar] Called");try{const e=await x(t);console.log("[handleUploadAvatar] User authenticated:",e);const n=(await t.formData()).get("avatar");if(console.log("[handleUploadAvatar] File received:",n?"yes":"no"),!n)return console.log("[handleUploadAvatar] No file, returning error"),Response.json({error:"No file provided"},{status:200});const s=5*1024*1024;if(n.size>s)return Response.json({error:"File size exceeds 5MB limit"},{status:200});if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(n.type))return Response.json({error:"Invalid file type. Only JPEG, PNG, and WebP are allowed"},{status:200});const l=await n.arrayBuffer(),c=Buffer.from(l),u=await Et(c,"avatars"),m=await Y(e,{avatarUrl:u});return m?Response.json({success:!0,avatarUrl:u,profile:m}):Response.json({error:"Failed to update profile"},{status:500})}catch(e){return e instanceof Error?Response.json({error:e.message},{status:200}):Response.json({error:"Failed to upload avatar"},{status:200})}}const Rt=[{method:"POST",path:"/api/auth/signup",handler:vt},{method:"POST",path:"/api/auth/login",handler:Nt},{method:"POST",path:"/api/auth/logout",handler:kt},{method:"GET",path:"/api/auth/verify-email",handler:_t},{method:"POST",path:"/api/tweets",handler:fe},{method:"GET",path:"/api/tweets",handler:Pt},{method:"GET",path:"/api/tweets/user/:userId",handler:It},{method:"DELETE",path:"/api/tweets/:tweetId",handler:Lt},{method:"POST",path:"/api/likes/:tweetId",handler:St},{method:"GET",path:"/api/likes/:tweetId",handler:At},{method:"GET",path:"/api/profile/me",handler:Ct},{method:"GET",path:"/api/profile/:username",handler:Tt},{method:"PATCH",path:"/api/profile",handler:Mt},{method:"POST",path:"/api/profile/avatar",handler:Ut}];function Ot(t,e){const r=t.split("/"),n=e.split("/");if(r.length!==n.length)return null;const s=[];for(let o=0;o<r.length;o++){const l=r[o],c=n[o];if(l.startsWith(":"))s.push(c);else if(l!==c)return null}return s}function we(t,e){for(const r of Rt)if(r.method===t){const n=Ot(r.path,e);if(n!==null)return{route:r,params:n}}return null}async function Dt({request:t,params:e}){const n=new URL(t.url).pathname,s=we("GET",n);if(!s)return Response.json({error:"Not found"},{status:404});try{return await s.route.handler(t,...s.params)}catch(o){return o instanceof Response?o:(console.error("API Error:",o),Response.json({error:"Internal server error"},{status:500}))}}async function Ft({request:t,params:e}){const n=new URL(t.url).pathname,s=t.method;console.log("[API Router] Action called:",s,n);const o=we(s,n);if(!o)return console.log("[API Router] No route match found"),Response.json({error:"Not found"},{status:404});console.log("[API Router] Route matched, calling handler");try{const l=await o.route.handler(t,...o.params);return console.log("[API Router] Handler returned response:",l.status,l.headers.get("content-type")),l}catch(l){return l instanceof Response?(console.log("[API Router] Caught Response error:",l.status),l):(console.error("API Error:",l),Response.json({error:"Internal server error"},{status:500}))}}const Bt=Object.freeze(Object.defineProperty({__proto__:null,action:Ft,loader:Dt},Symbol.toStringTag,{value:"Module"}));async function $t({request:t}){const e=await x(t);return{user:await B(e)}}const zt=k(function(){const{user:e}=R();return i("div",{className:"min-h-screen bg-gray-50",children:[a("header",{className:"bg-white shadow-sm",children:a("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:i("div",{className:"flex justify-between items-center",children:[a("div",{className:"flex items-center space-x-4",children:a("a",{href:"/home",className:"text-2xl font-bold text-blue-600",children:"Tweeter"})}),i("div",{className:"flex items-center space-x-4",children:[i("a",{href:`/${e?.username}`,className:"flex items-center space-x-2 text-gray-700 hover:text-blue-600",children:[e?.avatarUrl?a("img",{src:e.avatarUrl,alt:e.username,className:"w-8 h-8 rounded-full"}):a("div",{className:"w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center text-white font-semibold",children:e?.username.charAt(0).toUpperCase()}),a("span",{className:"text-sm font-medium",children:e?.username})]}),a("form",{action:"/api/auth/logout",method:"post",children:a("button",{type:"submit",className:"text-gray-700 hover:text-red-600 px-3 py-2 rounded-md text-sm font-medium",children:"Logout"})})]})]})})}),a("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a(K,{})}),a("footer",{className:"bg-white border-t mt-12",children:a("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:a("p",{className:"text-center text-sm text-gray-500",children:"Â© 2026 Tweeter. All rights reserved."})})})]})}),Gt=Object.freeze(Object.defineProperty({__proto__:null,default:zt,loader:$t},Symbol.toStringTag,{value:"Module"}));function Wt({tweetId:t,initialLiked:e=!1,initialLikeCount:r=0,onLike:n}){const[s,o]=N(e),[l,c]=N(r),[u,m]=N(!1);return X(()=>{o(e),c(r)},[e,r]),i("button",{onClick:async()=>{if(u)return;const j=s,P=l,p=!s;o(p),c(p?l+1:Math.max(0,l-1)),m(!0);try{n&&n(t,p)}catch(w){o(j),c(P),console.error("Failed to toggle like:",w)}finally{m(!1)}},disabled:u,className:`flex items-center space-x-1 transition ${s?"text-red-600 hover:text-red-700":"text-gray-500 hover:text-red-600"} ${u?"opacity-50 cursor-wait":""}`,children:[a("span",{className:"text-lg",children:s?"â¤ï¸":"ðŸ¤"}),a("span",{className:"text-sm font-medium",children:l})]})}function Vt({tweet:t,currentUserId:e,onDelete:r,onLike:n,showLikeButton:s=!0,showDeleteButton:o=!0}){const l=u=>Ge(new Date(u),{addSuffix:!0}),c=e===t.profileId;return a("div",{className:"bg-white rounded-lg shadow-sm p-6",children:i("div",{className:"flex items-start space-x-3",children:[a("a",{href:`/${t.author.username}`,children:t.author.avatarUrl?a("img",{src:t.author.avatarUrl,alt:t.author.username,className:"w-12 h-12 rounded-full"}):a("div",{className:"w-12 h-12 rounded-full bg-blue-600 flex items-center justify-center text-white font-semibold text-lg",children:t.author.username.charAt(0).toUpperCase()})}),i("div",{className:"flex-1 min-w-0",children:[i("div",{className:"flex items-center space-x-2 mb-1",children:[a("a",{href:`/${t.author.username}`,className:"font-semibold text-gray-900 hover:text-blue-600",children:t.author.username}),a("span",{className:"text-gray-500 text-sm",children:l(t.createdAt)})]}),a("p",{className:"text-gray-900 whitespace-pre-wrap break-words",children:t.content}),i("div",{className:"mt-3 flex items-center space-x-4 text-gray-500",children:[s&&a(Wt,{tweetId:t.id,initialLiked:t.isLiked??!1,initialLikeCount:t.likeCount??0,onLike:n}),o&&c&&r&&a("button",{onClick:()=>{confirm("Are you sure you want to delete this tweet?")&&r(t.id)},className:"hover:text-red-600 transition",children:"ðŸ—‘ï¸ Delete"})]})]})]})})}function be({tweets:t,currentUserId:e,onDelete:r,onLike:n,showLoadMore:s=!1,onLoadMore:o}){return t.length===0?i("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[a("p",{className:"text-gray-500 mb-4",children:"No tweets yet. Be the first to post!"}),a("a",{href:"/compose",className:"inline-block px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Compose Your First Tweet"})]}):i("div",{className:"space-y-4",children:[t.map(l=>a(Vt,{tweet:l,currentUserId:e,onDelete:r,onLike:n},l.id)),s&&o&&a("div",{className:"text-center pt-4",children:a("button",{onClick:o,className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 font-medium",children:"Load More"})})]})}function ye({onCancel:t,showCancelButton:e=!1,redirectOnSuccess:r=!0}){const n=C(),[s,o]=N("");X(()=>{n?.success&&o("")},[n]);const l=140-s.length,c=s.length>0&&s.length<=140,u=l<0,m=l<20&&l>=0;return a("div",{className:"bg-white rounded-lg shadow-sm p-6",children:i(U,{method:"post",className:"space-y-4",autoComplete:"off",children:[a("input",{type:"hidden",name:"intent",value:"compose"}),i("div",{children:[a("textarea",{name:"content",value:s,onChange:y=>o(y.target.value),placeholder:"What's happening?",autoComplete:"off",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none ${u?"border-red-500":"border-gray-300"}`,rows:4,maxLength:200}),i("div",{className:"flex justify-between items-center mt-2",children:[i("span",{className:`text-sm font-medium ${u?"text-red-600":m?"text-yellow-600":"text-gray-500"}`,children:[l," characters remaining"]}),u&&a("span",{className:"text-xs text-red-600",children:"Your tweet is too long!"})]})]}),n?.error&&a("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:a("p",{className:"text-red-600 text-sm",children:n.error})}),i("div",{className:"flex gap-3",children:[a("button",{type:"submit",disabled:!c,className:"flex-1 px-6 py-2.5 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition",children:"Tweet"}),e&&t&&a("button",{type:"button",onClick:t,className:"px-6 py-2.5 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300 transition",children:"Cancel"})]})]})})}async function Zt({request:t}){await x(t);const e=await O(t),r=await ce(20,0);return{tweets:await Promise.all(r.map(async s=>{const o=await F(s.id),l=e?await Z(s.id,e):!1;return{...s,likeCount:o,isLiked:l}})),userId:e}}async function Yt({request:t}){const e=await x(t),r=await t.formData(),n=r.get("tweetId"),s=r.get("intent");if(s==="compose"){const o=r.get("content");try{return await de(e,{content:o}),{success:!0}}catch(l){return{error:l instanceof Error?l.message:"Failed to create tweet"}}}if(s==="delete"&&n)try{return await me(n,e)?{success:!0}:{error:"Failed to delete tweet"}}catch(o){return{error:o instanceof Error?o.message:"Failed to delete tweet"}}if(s==="like"&&n)try{return await he(n,e),{success:!0}}catch(o){return{error:o instanceof Error?o.message:"Failed to toggle like"}}return null}const Jt=k(function(){const{tweets:e,userId:r}=R(),n=q(),s=()=>{n.revalidate()};return i("div",{className:"max-w-2xl mx-auto",children:[a("div",{className:"mb-6",children:a(ye,{showCancelButton:!1,redirectOnSuccess:!1})}),a(be,{tweets:e,currentUserId:r??void 0,onDelete:async c=>{const u=new FormData;u.append("tweetId",c),u.append("intent","delete"),(await fetch("/home",{method:"POST",body:u})).ok&&n.revalidate()},onLike:async(c,u)=>{const m=new FormData;m.append("tweetId",c),m.append("intent","like"),(await fetch("/home",{method:"POST",body:m})).ok&&n.revalidate()},showLoadMore:e.length>=20,onLoadMore:s})]})}),Kt=Object.freeze(Object.defineProperty({__proto__:null,action:Yt,default:Jt,loader:Zt},Symbol.toStringTag,{value:"Module"}));async function Ht({request:t}){return await x(t),null}async function qt({request:t}){await x(t);const e=await fe(t);return e.status===201?L("/home"):e}const Qt=k(function(){const e=Q();return i("div",{className:"max-w-2xl mx-auto",children:[a("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Compose Tweet"}),a(ye,{showCancelButton:!0,onCancel:()=>{e("/home")}}),a("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:i("p",{className:"text-sm text-blue-800",children:[a("strong",{children:"Tip:"})," Keep your tweets concise and engaging. You have 140 characters max!"]})})]})}),Xt=Object.freeze(Object.defineProperty({__proto__:null,action:qt,default:Qt,loader:Ht},Symbol.toStringTag,{value:"Module"}));function er({currentAvatarUrl:t,username:e,onUploadComplete:r}){const[n,s]=N(t||null),[o,l]=N(!1),[c,u]=N(null),m=Te(null),y=p=>{const w=p.target.files?.[0];if(!w)return;const _=5*1024*1024;if(w.size>_){u("File size exceeds 5MB limit");return}if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(w.type)){u("Invalid file type. Only JPEG, PNG, and WebP are allowed");return}u(null);const T=new FileReader;T.onloadend=()=>{s(T.result)},T.readAsDataURL(w),j(w)},j=async p=>{l(!0),u(null);try{const w=new FormData;w.append("avatar",p);const _=await fetch("/api/profile/avatar",{method:"POST",body:w});if(_.redirected||_.type==="opaqueredirect")throw new Error("Please log in to upload avatar");let S;try{S=await _.json()}catch{throw new Error("Unexpected response format. Please try again.")}if(!_.ok)throw new Error(S.error||"Upload failed");s(S.avatarUrl),r&&r(S.avatarUrl)}catch(w){u(w instanceof Error?w.message:"Upload failed"),s(t||null)}finally{l(!1)}},P=()=>{m.current?.click()};return i("div",{className:"space-y-4",children:[i("div",{className:"flex items-center space-x-4",children:[i("div",{className:"relative",children:[n?a("img",{src:n,alt:"Avatar",className:"w-24 h-24 rounded-full object-cover"}):a("div",{className:"w-24 h-24 rounded-full bg-blue-600 flex items-center justify-center text-white font-semibold text-3xl",children:e.charAt(0).toUpperCase()}),o&&a("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-full flex items-center justify-center",children:a("div",{className:"text-white text-sm",children:"Uploading..."})})]}),i("div",{children:[a("input",{ref:m,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:y,className:"hidden"}),a("button",{type:"button",onClick:P,disabled:o,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed font-medium",children:o?"Uploading...":"Change Avatar"}),a("p",{className:"mt-2 text-sm text-gray-500",children:"JPEG, PNG, or WebP. Max 5MB."})]})]}),c&&a("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:a("p",{className:"text-red-600 text-sm",children:c})})]})}async function tr({request:t}){const e=await x(t),r=await B(e);if(!r)throw new Response("Profile not found",{status:404});return{profile:r}}async function rr({request:t}){try{const e=await x(t),n=(await t.formData()).get("bio"),s=ge.parse({bio:n}),o=await Y(e,s);return o?{success:!0,profile:o}:{error:"Failed to update profile"}}catch(e){return e instanceof Error?{error:e.message}:{error:"Failed to update profile"}}}const ar=k(function(){const{profile:e}=R(),r=C(),n=Q(),s=q(),[o,l]=N(e.bio||""),c=o.length,u=160-c,m=c<=160;return a("div",{className:"max-w-2xl mx-auto",children:i("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Profile Settings"}),i("div",{className:"mb-6",children:[a("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:"Profile Picture"}),a(er,{currentAvatarUrl:e.avatarUrl,username:e.username,onUploadComplete:()=>s.revalidate()})]}),i(U,{method:"post",className:"space-y-6",children:[i("div",{children:[a("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio"}),a("textarea",{id:"bio",name:"bio",value:o,onChange:y=>l(y.target.value),placeholder:"Tell us about yourself...",className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none ${m?"border-gray-300":"border-red-500"}`,rows:4,maxLength:200}),a("div",{className:"flex justify-between items-center mt-1",children:i("span",{className:`text-sm ${u<0?"text-red-600":"text-gray-500"}`,children:[u," characters remaining"]})})]}),r&&"success"in r&&r.success&&a("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:a("p",{className:"text-green-600 text-sm",children:"Profile updated successfully!"})}),r&&"error"in r&&a("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:a("p",{className:"text-red-600 text-sm",children:r.error})}),i("div",{className:"flex gap-3",children:[a("button",{type:"submit",disabled:!m,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition",children:"Save Changes"}),a("button",{type:"button",onClick:()=>n(`/${e.username}`),className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300 transition",children:"Cancel"})]})]})]})})}),nr=Object.freeze(Object.defineProperty({__proto__:null,action:rr,default:ar,loader:tr},Symbol.toStringTag,{value:"Module"}));async function sr({params:t,request:e}){const r=t.username,n=await pe(r);if(!n)throw new Response("User not found",{status:404});const s=await O(e).catch(()=>null),o=await ue(n.id,20,0),l=await Promise.all(o.map(async u=>{const m=await F(u.id),y=s?await Z(u.id,s):!1;return{...u,likeCount:m,isLiked:y}})),c=s===n.id;return{profile:n,tweets:l,isOwnProfile:c,currentUserId:s}}const or=k(function(){const{profile:e,tweets:r,isOwnProfile:n,currentUserId:s}=R(),o=l=>new Date(l).toLocaleDateString("en-US",{month:"long",year:"numeric"});return i("div",{className:"max-w-2xl mx-auto",children:[a("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:i("div",{className:"flex items-start space-x-4",children:[a("div",{children:e.avatarUrl?a("img",{src:e.avatarUrl,alt:e.username,className:"w-24 h-24 rounded-full"}):a("div",{className:"w-24 h-24 rounded-full bg-blue-600 flex items-center justify-center text-white font-semibold text-3xl",children:e.username.charAt(0).toUpperCase()})}),i("div",{className:"flex-1",children:[i("div",{className:"flex items-center justify-between mb-2",children:[a("h1",{className:"text-2xl font-bold text-gray-900",children:e.username}),n&&a("a",{href:"/settings",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-medium text-sm",children:"Edit Profile"})]}),e.bio&&a("p",{className:"text-gray-700 mb-3 whitespace-pre-wrap",children:e.bio}),i("p",{className:"text-gray-500 text-sm",children:["Joined ",o(e.createdAt)]})]})]})}),i("div",{className:"mb-4",children:[i("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:["Tweets (",r.length,")"]}),a(be,{tweets:r,currentUserId:s??void 0,showLoadMore:!1})]})]})}),ir=Object.freeze(Object.defineProperty({__proto__:null,default:or,loader:sr},Symbol.toStringTag,{value:"Module"})),Ir={entry:{module:"/assets/entry.client-BDlQQZQa.js",imports:["/assets/chunk-EPOLDU6W-Z5o18_rP.js"],css:[]},routes:{root:{id:"root",parentId:void 0,path:"",index:void 0,caseSensitive:void 0,hasAction:!1,hasLoader:!1,hasClientAction:!1,hasClientLoader:!1,hasClientMiddleware:!1,hasErrorBoundary:!1,module:"/assets/root-BbI-y48_.js",imports:["/assets/chunk-EPOLDU6W-Z5o18_rP.js"],css:["/assets/root-D6BKXRkP.css"],clientActionModule:void 0,clientLoaderModule:void 0,clientMiddlewareModule:void 0,hydrateFallbackModule:void 0},"routes/_index":{id:"routes/_index",parentId:"root",path:void 0,index:!0,caseSensitive:void 0,hasAction:!1,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasClientMiddleware:!1,hasErrorBoundary:!1,module:"/assets/_index-CySOKSx5.js",imports:["/assets/chunk-EPOLDU6W-Z5o18_rP.js"],css:[],clientActionModule:void 0,clientLoaderModule:void 0,clientMiddlewareModule:void 0,hydrateFallbackModule:void 0},"routes/signup":{id:"routes/signup",parentId:"root",path:"signup",index:void 0,caseSensitive:void 0,hasAction:!0,hasLoader:!1,hasClientAction:!1,hasClientLoader:!1,hasClientMiddleware:!1,hasErrorBoundary:!1,module:"/assets/signup-DDZOIB_z.js",imports:["/assets/chunk-EPOLDU6W-Z5o18_rP.js"],css:[],clientActionModule:void 0,clientLoaderModule:void 0,clientMiddlewareModule:void 0,hydrateFallbackModule:void 0},"routes/login":{id:"routes/login",parentId:"root",path:"login",index:void 0,caseSensitive:void 0,hasAction:!0,hasLoader:!1,hasClientAction:!1,hasClientLoader:!1,hasClientMiddleware:!1,hasErrorBoundary:!1,module:"/assets/login-B-7OPwSV.js",imports:["/assets/chunk-EPOLDU6W-Z5o18_rP.js"],css:[],clientActionModule:void 0,clientLoaderModule:void 0,clientMiddlewareModule:void 0,hydrateFallbackModule:void 0},"routes/verify-email":{id:"routes/verify-email",parentId:"root",path:"verify-email",index:void 0,caseSensitive:void 0,hasAction:!1,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasClientMiddleware:!1,hasErrorBoundary:!1,module:"/assets/verify-email-209RQ7i_.js",imports:["/assets/chunk-EPOLDU6W-Z5o18_rP.js"],css:[],clientActionModule:void 0,clientLoaderModule:void 0,clientMiddlewareModule:void 0,hydrateFallbackModule:void 0},"routes/api/$":{id:"routes/api/$",parentId:"root",path:"api/*",index:void 0,caseSensitive:void 0,hasAction:!0,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasClientMiddleware:!1,hasErrorBoundary:!1,module:"/assets/_-l0sNRNKZ.js",imports:[],css:[],clientActionModule:void 0,clientLoaderModule:void 0,clientMiddlewareModule:void 0,hydrateFallbackModule:void 0},"routes/_layout":{id:"routes/_layout",parentId:"root",path:void 0,index:void 0,caseSensitive:void 0,hasAction:!1,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasClientMiddleware:!1,hasErrorBoundary:!1,module:"/assets/_layout-CRgree3b.js",imports:["/assets/chunk-EPOLDU6W-Z5o18_rP.js"],css:[],clientActionModule:void 0,clientLoaderModule:void 0,clientMiddlewareModule:void 0,hydrateFallbackModule:void 0},"routes/home":{id:"routes/home",parentId:"routes/_layout",path:"home",index:void 0,caseSensitive:void 0,hasAction:!0,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasClientMiddleware:!1,hasErrorBoundary:!1,module:"/assets/home-Dbd-gefo.js",imports:["/assets/chunk-EPOLDU6W-Z5o18_rP.js","/assets/TweetFeed-XsqD6WpB.js","/assets/TweetComposer-GLwEiBi2.js"],css:[],clientActionModule:void 0,clientLoaderModule:void 0,clientMiddlewareModule:void 0,hydrateFallbackModule:void 0},"routes/compose":{id:"routes/compose",parentId:"routes/_layout",path:"compose",index:void 0,caseSensitive:void 0,hasAction:!0,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasClientMiddleware:!1,hasErrorBoundary:!1,module:"/assets/compose-C95nKiS5.js",imports:["/assets/chunk-EPOLDU6W-Z5o18_rP.js","/assets/TweetComposer-GLwEiBi2.js"],css:[],clientActionModule:void 0,clientLoaderModule:void 0,clientMiddlewareModule:void 0,hydrateFallbackModule:void 0},"routes/settings":{id:"routes/settings",parentId:"routes/_layout",path:"settings",index:void 0,caseSensitive:void 0,hasAction:!0,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasClientMiddleware:!1,hasErrorBoundary:!1,module:"/assets/settings-CebzJ38j.js",imports:["/assets/chunk-EPOLDU6W-Z5o18_rP.js"],css:[],clientActionModule:void 0,clientLoaderModule:void 0,clientMiddlewareModule:void 0,hydrateFallbackModule:void 0},"routes/$username":{id:"routes/$username",parentId:"routes/_layout",path:":username",index:void 0,caseSensitive:void 0,hasAction:!1,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasClientMiddleware:!1,hasErrorBoundary:!1,module:"/assets/_username-D9ROUmff.js",imports:["/assets/chunk-EPOLDU6W-Z5o18_rP.js","/assets/TweetFeed-XsqD6WpB.js"],css:[],clientActionModule:void 0,clientLoaderModule:void 0,clientMiddlewareModule:void 0,hydrateFallbackModule:void 0}},url:"/assets/manifest-5125b466.js",version:"5125b466",sri:void 0},Lr="build/client",Sr="/",Ar={unstable_optimizeDeps:!1,unstable_subResourceIntegrity:!1,unstable_trailingSlashAwareDataRequests:!1,v8_middleware:!1,v8_splitRouteModules:!1,v8_viteEnvironmentApi:!1},Er=!0,Tr=!1,Mr=["/"],Cr={mode:"lazy",manifestPath:"/__manifest"},Ur="/",Rr={module:Ve},Or={root:{id:"root",parentId:void 0,path:"",index:void 0,caseSensitive:void 0,module:Ke},"routes/_index":{id:"routes/_index",parentId:"root",path:void 0,index:!0,caseSensitive:void 0,module:Xe},"routes/signup":{id:"routes/signup",parentId:"root",path:"signup",index:void 0,caseSensitive:void 0,module:dt},"routes/login":{id:"routes/login",parentId:"root",path:"login",index:void 0,caseSensitive:void 0,module:ht},"routes/verify-email":{id:"routes/verify-email",parentId:"root",path:"verify-email",index:void 0,caseSensitive:void 0,module:wt},"routes/api/$":{id:"routes/api/$",parentId:"root",path:"api/*",index:void 0,caseSensitive:void 0,module:Bt},"routes/_layout":{id:"routes/_layout",parentId:"root",path:void 0,index:void 0,caseSensitive:void 0,module:Gt},"routes/home":{id:"routes/home",parentId:"routes/_layout",path:"home",index:void 0,caseSensitive:void 0,module:Kt},"routes/compose":{id:"routes/compose",parentId:"routes/_layout",path:"compose",index:void 0,caseSensitive:void 0,module:Xt},"routes/settings":{id:"routes/settings",parentId:"routes/_layout",path:"settings",index:void 0,caseSensitive:void 0,module:nr},"routes/$username":{id:"routes/$username",parentId:"routes/_layout",path:":username",index:void 0,caseSensitive:void 0,module:ir}},Dr=!1;export{Dr as allowedActionOrigins,Ir as assets,Lr as assetsBuildDirectory,Sr as basename,Rr as entry,Ar as future,Tr as isSpaMode,Mr as prerender,Ur as publicPath,Cr as routeDiscovery,Or as routes,Er as ssr};
//# sourceMappingURL=index.js.map
